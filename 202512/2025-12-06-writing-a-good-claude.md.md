# Writing a good CLAUDE.md
- URL: https://www.humanlayer.dev/blog/writing-a-good-claude-md
- Added At: 2025-12-06 15:50:02
- Tags: #read #llm
- [Link To Text](2025-12-06-writing-a-good-claude.md_raw.md)

## TL;DR
本文介绍了`CLAUDE.md`文件作为代码代理初始上下文的核心作用，强调通过定义项目的目标、技术栈和工作流程来引导代理。关键优化策略包括保持指令简洁（优先普适性、控制文件长度）、拆分任务特定内容、明确工具分工，以及手工精心设计内容，以平衡信息量和上下文效率，最大化代理效能。

## Summary
基于LLM的统计特性，`CLAUDE.md`文件是帮助Claude等编码代理初始化代码库认知的关键文件。由于LLM本质上是无状态的，每次会话开始时代理对代码库一无所知，因此`CLAUDE.md`需作为核心上下文提供必要信息。

**核心原则与作用**  
- **目标**：通过定义项目的**WHAT**（技术栈与结构）、**WHY**（项目目的）和**HOW**（工作流程）来引导代理。  
- **挑战**：代理可能因内置系统提示而忽略文件内容，尤其当指令非普适时。因此，内容需高度相关且简洁。

**优化策略**  
1. **精简指令**：  
   - 避免冗长：LLM可遵循的指令有限（前沿模型约150-200条），过多指令会均匀降低遵循质量。  
   - 优先普适性：仅包含与所有任务通用的指令，减少无关信息干扰。  

2. **文件长度控制**：  
   - 推荐少于300行，越短越好（例如HumanLayer示例仅60行），确保上下文窗口聚焦核心信息。  

3. **渐进式披露**：  
   - 将任务特定指令（如测试流程、代码规范）拆分到独立Markdown文件中，通过`CLAUDE.md`提供文件索引，让代理按需读取，避免上下文膨胀。  

4. **工具分工明确**：  
   - 不要用LLM替代linter：格式化等任务应交由确定性工具（如Biome），并通过Hook或Slash Command整合，提升效率。  

5. **人工精心设计**：  
   - 避免自动生成`CLAUDE.md`，因其影响工作流全阶段；需手动审慎编写每行内容，以发挥其高杠杆作用。

**结论**：成功的关键在于平衡信息的必要性与简洁性，通过结构化设计和工具协同，最大化代理效能。
