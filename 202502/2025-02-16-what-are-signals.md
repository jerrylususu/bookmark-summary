# What are Signals?
- URL: https://playfulprogramming.com/posts/what-are-signals
- Added At: 2025-02-16 07:20:43
- [Link To Text](2025-02-16-what-are-signals_raw.md)

## TL;DR
信号在现代前端框架中广泛应用，提供状态管理和订阅机制。它包括基础信号、计算属性和副作用，能自动跟踪依赖变化并避免glitch问题。信号正被提议纳入JavaScript标准库，具有强大的响应式能力。

## Summary
1. **信号的普及**：
   - 信号（Signals）在现代前端框架中广泛应用，包括Angular、Vue、Preact、Solid.js、Svelte、Qwik等。
   - 甚至有提案建议将信号引入JavaScript标准库。

2. **什么是信号**：
   - 信号是一种状态管理和订阅状态变化的方式。
   - 信号的基本形式包括初始值、getter、setter和订阅方法。

3. **信号的基本实现**：
   - 信号的核心是一个简单的状态存储和通知机制。
   - 示例代码展示了如何创建一个信号，并在状态变化时通知订阅者。

4. **信号的应用**：
   - 信号可以用于将DOM节点与JavaScript状态绑定。
   - 示例展示了如何使用信号实现一个点击计数器。

5. **计算属性（Computed Properties）**：
   - 计算属性用于从其他状态派生新的状态值。
   - 示例展示了如何使用计算属性来自动计算两个信号的和。

6. **计算属性的实现**：
   - 计算属性可以通过信号的订阅机制自动更新。
   - 示例展示了如何在计算属性中使用信号来实现派生状态。

7. **计算属性的改进**：
   - 计算属性的内部实现可以通过信号来简化。
   - 这种简化有助于理解许多信号实现的底层优化。

8. **副作用（Effects）**：
   - 副作用是用于跟踪信号或计算值变化的机制。
   - 示例展示了如何使用副作用来订阅计算属性的变化，并自动更新DOM。

9. **副作用的实现**：
   - 副作用可以通过包装订阅方法来实现。
   - 示例展示了如何使用副作用来简化代码，并移除手动订阅的步骤。

10. **自动跟踪（Auto-tracking）**：
    - 自动跟踪是一种隐式依赖跟踪机制，可以消除显式的依赖数组。
    - 通过使用`Listener`单例，信号可以在内部自动跟踪依赖。

11. **自动跟踪的实现**：
    - 自动跟踪通过在`effect`和`computed`中使用`Listener`来实现。
    - 示例展示了如何通过自动跟踪来简化代码，并移除显式的依赖数组。

12. **信号中的问题（Glitches）**：
    - 信号实现中可能存在暂时性错误值的问题，称为“glitch”。
    - 示例展示了如何通过信号更新顺序导致计算错误的情况。

13. **解决Glitches**：
    - 通过在`effect`中等待所有依赖信号完成更新，可以避免glitch。
    - 示例展示了如何通过修改信号订阅机制来解决glitch问题。

14. **信号在JavaScript生态中的定位**：
    - 信号是一种强大的响应式原语，结合了状态管理、可写性和订阅能力。
    - 与RxJS中的`Observable`和`Subject`相比，信号具有更全面的功能。
