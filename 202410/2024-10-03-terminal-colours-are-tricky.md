# Terminal colours are tricky
- URL: https://jvns.ca/blog/2024/10/01/terminal-colours/
- Added At: 2024-10-03 05:23:38
- [Link To Text](2024-10-03-terminal-colours-are-tricky_raw.md)

## TL;DR
文章讨论了终端配色方案的复杂性，涉及蓝黑色、亮黄色、256色、Solarized主题、vim主题匹配等多个问题，并提供了重新配置颜色、最小对比度功能等解决方案。作者强调处理这些细节虽有趣但令人沮丧，推荐使用base16-shell和base16-vim简化配置。

## Summary
1. **终端颜色难题**：作者思考了为何在终端中找到满意的配色方案如此困难，并询问了Mastodon上的用户关于终端颜色的问题，得到了许多有趣的反馈。

2. **问题1：蓝黑色**：
   - **描述**：许多用户抱怨“蓝黑色难以阅读”。
   - **示例**：在Terminal.app中，背景设为黑色，运行`ls`命令时，目录显示为难以阅读的蓝色。
   - **原因**：涉及ANSI颜色，终端有16种编号颜色，程序通过ANSI转义码使用这些颜色。

3. **问题1.5：亮黄色在白色上**：
   - **描述**：亮黄色在白色背景上更难阅读。
   - **示例**：在默认设置的终端中，亮黄色几乎无法阅读。

4. **解决方案：重新配置颜色**：
   - **方法1**：配置终端模拟器，大多数现代终端模拟器允许重新配置颜色，甚至预装了一些主题。
   - **方法2**：运行Shell脚本，使用ANSI转义码告诉终端模拟器重新配置颜色。

5. **问题2：程序使用256色**：
   - **描述**：一些程序使用扩展的256色，导致颜色对比度差。
   - **示例**：`fd`命令的输出在某些颜色方案中对比度很差。

6. **问题3：Solarized主题中的灰色**：
   - **描述**：Solarized主题中，颜色9-14被映射为一系列灰色，导致`ls`命令输出难以阅读。

7. **问题4：vim主题与终端背景不匹配**：
   - **描述**：如果vim主题的背景颜色与终端主题不同，会出现难看的边框。

8. **问题5：程序设置背景颜色**：
   - **描述**：一些终端应用程序设置了不必要的背景颜色，导致视觉问题。
   - **示例**：`ngrok`设置了背景颜色，但在某些颜色方案中显示不正常。

9. **解决方案：最小对比度**：
   - **描述**：一些终端（如iTerm2、Tabby、Kitty）有“最小对比度”功能，自动调整颜色以确保足够的对比度。

10. **问题6：`TERM`设置错误**：
    - **描述**：用户SSH到不支持本地`TERM`环境变量的系统时，颜色可能无法正常显示。

11. **问题7：选择“好”颜色很难**：
    - **描述**：设计或寻找合适的终端配色方案时，可能会遇到颜色盲、背景颜色与光标颜色过于接近等问题。

12. **问题8：使nethack/mc看起来正确**：
    - **描述**：使用nethack或midnight commander等程序时，可能期望特定的颜色方案，但在某些主题中显示不正常。

13. **问题9：命令在写入管道时禁用颜色**：
    - **描述**：运行`fd | less`时，颜色被禁用。
    - **解决方案**：使用`unbuffer`命令，如`unbuffer fd | less -r`。

14. **问题10：`ls`和其他命令中的不想要的颜色**：
    - **描述**：一些用户不希望`ls`使用颜色，可能因为蓝色在黑色背景上难以阅读。
    - **解决方案**：使用`ls --color=never`或设置`LS_COLORS`环境变量。

15. **问题11：vim中的颜色**：
    - **描述**：配置vim颜色时，可能会遇到终端配色方案与vim配色方案不匹配的问题。
    - **历史**：2016年之前，vim不支持24位颜色，需要同步终端和vim的配色方案。

16. **其他问题**：
    - **描述**：涉及多个程序的复杂问题，如tmux/ssh/vim的组合使用。

17. **总结**：
    - **个人感受**：作者认为处理这些细节虽然有趣，但在实际使用中非常令人沮丧。
    - **解决方案**：使用base16-shell和base16-vim，只需几行配置即可解决大部分问题。

18. **其他配色方案工具**：
    - **描述**：如rootloops.sh，用于生成配色方案。

19. **最小对比度功能**：
    - **描述**：作者认为“最小对比度”功能非常出色，可以解决大多数颜色问题。
