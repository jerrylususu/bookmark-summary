# Functional Tests As A Tree Of Continuations – Evan Miller
- URL: https://www.evanmiller.org/functional-tests-as-a-tree-of-continuations.html
- Added At: 2025-03-14 15:00:46

## TL;DR
本文提出功能测试"延续树"方法，通过树形结构将每个步骤设为节点，子节点继承父节点数据库快照状态，使测试代码量从O(N²)降至O(N)。该方法消除冗余代码，精准定位故障，支持跨步骤数据对比，且结构直观对应用户操作流程。其基于数据库版本控制实现，在Chicago Boss框架中通过嵌套回调构建树形测试结构，显著提升测试效率。

## Summary
该文章提出了一种改进的功能测试方法，通过将测试结构化为“延续树”来减少冗余和优化效率。传统功能测试以列表形式编写，导致多步骤流程测试中代码重复且冗余度高（如测试五步骤流程时，代码长度呈现O(N²)增长）。为解决这一问题，作者建议采用树形结构：每个节点代表一个测试步骤，子节点通过复制父节点状态（如数据库快照）延续执行，避免重复前置步骤。此方法使总代码量降至O(N)级别，并具备以下优势：①消除重复代码；②大幅减少测试设置工作；③失败时精准定位故障节点；④测试结构与用户操作流程直接对应；⑤利用闭包特性方便跨步骤数据对比。其实现依赖数据库的版本控制功能，作者举例说明在Erlang的Chicago Boss框架中通过嵌套回调实现该结构，将多步骤测试嵌套为层次分明的树形代码。文中强调该方法契合功能测试的复杂性，相比逐项执行的列表式测试更高效直观。
