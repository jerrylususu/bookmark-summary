# How to review code effectively: A GitHub staff engineer’s philosophy
- URL: https://github.blog/developer-skills/github/how-to-review-code-effectively-a-github-staff-engineers-philosophy/
- Added At: 2024-07-24 14:42:39
- [Link To Text](2024-07-24-how-to-review-code-effectively:-a-github-staff-engineer’s-philosophy_raw.md)

## TL;DR
代码审查是提高软件质量的关键，通过GitHub的拉取请求系统，可以有效管理和优化审查流程。良好的审查应清晰沟通、提供具体示例，并避免偏见。自我审查和使用自动化工具能进一步提升审查效率和价值。

## Summary
1. **代码审查的重要性**：
   - 作为GitHub的资深工程师，代码审查是日常工作的重点之一，过去八年中审查了超过7,000个拉取请求。
   - 代码审查对于构建高质量软件至关重要，另一双眼睛往往能发现原本会错过的错误。

2. **代码审查的哲学**：
   - 视代码审查为工作的重要方面，优先于自己的工作分支，因为同事的拉取请求已经通过了持续集成（CI）的考验，更接近可发布状态。
   - 尽早提供反馈，以便快速解决问题或发布功能。

3. **代码审查的定义**：
   - 通过GitHub的拉取请求审查，允许合作者对提议的更改进行评论、表示批准或请求进一步更改。
   - 视拉取请求为对话的开始，代码审查是塑造产品实现的机会。

4. **优化代码审查过程**：
   - **寻找拉取请求**：
     - 通过GitHub通知收件箱、团队特定的Slack频道和GitHub Slack集成发现待审查的拉取请求。
     - 使用搜索查询如`is:open archived:false is:pr org:github -is:draft team-review-requested:github/relevant-codeowner-team`来查找需要审查的拉取请求。
   - **管理通知**：
     - 通过精简代码所有者团队来管理通知，避免通知泛滥导致拉取请求被忽视。
     - 使用自动化工具如PagerDuty API和Octokit库来管理轮班响应团队成员。
   - **标准化审查流程**：
     - 使用CODEOWNERS文件和分支保护规则等自动化工具来强制执行审查标准。
     - 文档化团队的代码审查流程，确保所有成员了解如何进行和提交拉取请求。

5. **良好与不良代码审查的特征**：
   - **良好审查**：
     - 清晰沟通，区分个人偏好和必须更改的建议。
     - 提供具体示例来支持建议。
   - **不良审查**：
     - 缺乏清晰度，如笼统的批准或拒绝，未明确指出建议的实施时机。

6. **如何进行良好的代码审查**：
   - **提问**：
     - 信任作者对更改的了解，询问关于代码假设和性能的问题。
     - 作者通过解释和提供自动化测试或数据来回应。
   - **提供肯定**：
     - 评论拉取请求中同意的部分，增强作者信心。
   - **意识偏见和假设**：
     - 避免因对审查者或代码区域的偏见影响审查。
     - 通过编写测试减少偏见。
   - **批准与否**：
     - 慎重决定是否批准，区分个人偏好和必须更改的建议。
     - 使用“请求更改”选项时非常谨慎，通常仅在存在立即安全问题时使用。

7. **最大化代码审查的价值**：
   - **自我审查**：
     - 在请求他人审查前自我审查，标记不明显的更改。
     - 使用自动化工具如lerebear/sizeup-action来标记拉取请求的复杂性和大小。
   - **欢迎合并后的审查**：
     - 即使拉取请求已合并，仍欢迎审查并根据反馈进行改进。
   - **使用草稿拉取请求**：
     - 使用草稿状态来表明是否准备好审查，避免过早或过晚的审查。
   - **保持谦逊**：
     - 对审查意见保持开放态度，及时回应并跟进建议。

8. **总结**：
   - 代码审查对产品
