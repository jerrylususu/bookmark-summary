# How to write a good spec for AI agents
- URL: https://addyosmani.com/blog/good-spec/
- Added At: 2026-01-14 13:54:26
- Tags: #read #llm #guide

## TL;DR
本文提出了一套为AI代理编写规格说明的框架，强调通过四方面设计高质量文档：从高层愿景出发逐步细化、采用结构化文档分领域覆盖需求、模块化拆分任务以避免指令过载、以及内置约束与领域知识以提升质量。核心在于平衡指导清晰度和计算负载，使AI在边界内高效工作。

## Summary
文章提出了一套为AI代理编写优质规格说明的框架。其核心理念是设计清晰、结构化且适度的规格文档，在不超出AI上下文窗口限制的前提下提供充分指导。

**核心原则**
1. **从高层愿景出发，由AI填充细节**：
   - 初始阶段仅提供简洁的目标和核心需求，作为“产品简报”。
   - 让AI基于此生成详细规格，利用其扩展能力，同时由开发者把控方向。
   - 工具如Claude的“计划模式”可强制先规划后执行，确保规格无误再进入编码阶段。
   - 最终规格文档应作为项目“唯一真相源”，持续迭代并用于后续会话的上下文锚定。

2. **结构化规格文档，类似专业PRD或SRS**：
   - 规格应覆盖六个关键领域：可执行命令、测试方法、项目结构、代码风格、Git工作流和边界限制。
   - 采用Markdown等格式明确分段（如目标、技术栈、约束），提升AI解析效率。
   - 集成“规格驱动开发”工作流：分阶段（规格制定、计划、任务拆分、实施）进行门控验证，确保每个环节达标后再推进。
   - 将规格视为“活文档”，随项目进展更新，并可为不同任务创建专有代理配置。

3. **模块化分解任务，避免单一庞杂提示**：
   - 研究显示过多指令会导致AI性能下降（“指令诅咒”），需将复杂需求拆分为顺序性小任务。
   - 策略包括：将规格按组件分拆为独立文件或章节、创建分层摘要作为索引、使用子代理处理专项任务（如数据库设计、前端开发）。
   - 单代理适合中小项目，多代理可提升复杂项目的吞吐量，但需协调依赖关系。
   - 每次提示聚焦单一任务，仅注入相关上下文，避免信息过载。

4. **内置自查、约束与专家知识**：
   - 设置三级边界系统：✅ 始终执行（如运行测试）、⚠️ 需人工批准（如修改数据库）、🚫 禁止操作（如提交密钥）。
   - 鼓励AI自检：要求其对照规格验证输出，或引入“LLM即法官”模式进行主观质量评审。
   - 将领域知识（如特定库的陷阱、架构偏好）和测试用例纳入规格，引导AI规避常见错误。
   - 针对简单任务保持规格简洁，避免过度复杂化。

**总结**
有效规格的核心在于平衡指导深度与上下文负载，通过结构化、模块化设计及持续迭代，使AI代理在明确边界内高效工作，同时融入人类专家的关键洞察以确保质量。
