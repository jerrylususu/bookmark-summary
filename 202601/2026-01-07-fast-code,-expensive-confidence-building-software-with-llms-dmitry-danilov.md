# Fast Code, Expensive Confidence: Building Software With LLMs | Dmitry Danilov
- URL: https://ddanilov.me/how-llms-affect-software-architecture
- Added At: 2026-01-07 13:52:59
- Tags: #read

## TL;DR
本文指出，LLM加速了代码生成但也增加了风险，软件架构因此更加关键。强调模块化、标准接口和强类型语言能缩小上下文范围、降低错误，同时验证和测试成为核心优势。架构确保AI生成代码的可靠迭代，而非盲目加速。

## Summary
本文探讨了LLM（大型语言模型）如何重塑软件架构，强调在AI时代，架构的重要性不降反升，因为LLM改变了软件开发的经济性，使代码生成变快但风险增加。以下是结构化总结：

### LLM对软件开发的深刻影响
- **代码生成变快但带来风险**：LLM能快速生成看似合理的代码（“氛围编程”），但代码可能隐含错误、不完整或不符合约束，导致“信心过剩”而非正确性。
- **审查和测试成为核心**：代码量激增后，代码审查不再是高级工程师的专属任务，而成为基本技能；测试则从“卫生环节”变为“现实定义”，通过确定性测试框架验证概率性生成的代码。
- **上下文限制是关键瓶颈**：LLM基于有限且可能丢失信息的上下文操作，系统越复杂，LLM越容易忽略约束或虚构细节，因此需要架构来管理上下文范围。

### 架构的新角色：确保速度的安全性
- **架构价值提升**：架构不再是抽象设计，而是实现“安全速度”的实践策略，通过模块化、清晰接口和标准解决方案来缩小上下文范围、降低错误影响。
- **模块化和接口**：小规模、隔离的组件（如微服务）减少变更所需信息量，明确接口（如OpenAPI、gRPC）帮助LLM遵守契约而非猜测意图。
- **标准解决方案优先**：鼓励使用成熟库而非自定义代码，减少LLM“幻觉”（如凭空生成边缘案例），提升可维护性。
- **改写变得可控**：在契约和测试约束下，组件改写可快速验证，通过端到端测试和基准测试比较实现，降低风险。

### 验证成为差异化优势
- **验证机制是核心资产**：随着AI加速实现，测试、基准测试和可观测性成为关键，用于捕获AI代码的全局不兼容性和性能回归。
- **架构增强验证效果**：小组件使测试更精准，故障更易定位，回归更易检测，验证成本降低。
- **特征便宜，回归昂贵**：好的架构像护城河，确保验证可靠，防止信心替代正确性。

### 角色演变与产品开发
- **角色不会融合但协作更紧密**：AI不会使开发者变成产品经理或反之，而是压缩想法与执行间的距离，加速原型设计和实验。
- **产品演化加速**：模块化架构支持安全的产品迭代，如A/B测试和功能标志，AI放大协同优势，但架构决定放大的是洞察还是混乱。

### 强类型语言的吸引力增强
- **强类型语言更实用**：编译器作为可扩展的守门员，快速反馈错误，辅助LLM迭代；类型系统还能约束AI生成的抽象，防止“抽象膨胀”，并作为不易漂移的文档。
- **优势在变化加速时凸显**：当代码生成快且作者是机器时，强类型减少歧义，提升可维护性。

### 手动代码的持续存在
- **手动编码仍有必要**：在模型误解、创新领域或关键性能场景中，直接编写代码更高效，类似内联汇编，需谨慎但不可替代。

### 为AI优化文档
- **README兼顾人类和AI**：组件文档应包含操作事实（如功能、约束、测试方法），以便粘贴到LLM上下文窗口，减少幻觉，提升正确性。

### 总体结论
AI不淘汰架构，而是使其可衡量。成功团队将AI视为受控的组件替换引擎，而非代码洪流，通过架构、测试和验证将生成转化为可靠过程。架构如同“令牌预算”，决定变更是否安全。
