# The Art of Nested Code Fencing in Markdown - Susam Pal
- URL: https://susam.net/nested-code-fences.html
- Added At: 2026-01-20 14:35:22
- Tags: #read #tips

## TL;DR
Susam Pal的文章探讨了如何在CommonMark和GFM Markdown中安全嵌套代码块分隔符，如三重反引号。通过使用代字号或多重反引号作为分隔符，避免渲染错误，帮助用户正确展示代码示例。基于CommonMark规范。

## Summary
这篇文章由Susam Pal于2026年1月19日撰写，重点探讨了在CommonMark和GitHub Flavoured Markdown（GFM）中如何嵌套代码块分隔符，如三重反引号，以便在Markdown文档中正确展示代码示例。文章内容分为几个主要部分：

- **基本代码围栏**：解释在Markdown代码块中展示Markdown示例时，三重反引号可能被误解释为代码块结束。例如，在README.md中教人写Markdown时，如果代码块中包含三重反引号，会导致渲染错误。

- **花式代码围栏**：提供了嵌套解决方案。可以使用代字号（~）或不同数量的反引号作为代码块分隔符。只要分隔符长度至少为三，且匹配开头和结尾，就能在代码块内安全包含三重反引号。例如，使用多组反引号或代字号包裹代码，避免冲突。

- **基本代码片段**：类似问题出现在内联代码中，如用反引号分隔代码时，如果代码内含有反引号，会导致渲染问题。例如，"`echo`"的渲染中，内部的"echo"可能被误解析。

- **花式代码片段**：解决方案是使用多个反引号作为分隔符，并利用空格规则。如果内联代码以空格开头和结尾，渲染时会自动去除首尾空格，从而允许安全包含反引号。例如，用三重反引号包裹代码时，添加空格可避免歧义。

- **规范**：引用CommonMark规范版本0.30中的条款，说明代码围栏和代码片段的定义及规则。例如，代码围栏必须至少三个字符，可混用反引号或代字号，但类型需一致；代码片段的分隔符长度必须匹配，且处理首尾空格以支持嵌套。

文章旨在帮助用户解决Markdown嵌套代码时的常见问题，并强调这些方法在CommonMark和GFM中的通用性。
