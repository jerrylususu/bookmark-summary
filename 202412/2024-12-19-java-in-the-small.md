# Java in the Small
- URL: https://horstmann.com/unblog/2024-12-11/index.html
- Added At: 2024-12-19 15:00:36

## TL;DR
文章讨论了Java在小型程序中的适用性，强调了现代Java的改进和工具支持，如直接运行.java文件、简化代码的隐式类和记录等特性。Java在处理重复任务和探索性编程中表现出色，尽管某些功能如JSON处理和命令行工具需依赖第三方库。JBang等工具进一步提升了Java脚本的开发体验。

## Summary
1. **Java的适用性**：
   - Java不仅适用于大型、长期项目，也适合小型任务。
   - 关键特性包括编译时类型检查和强大的工具支持。

2. **自动化重复任务**：
   - 作者作为作者和教师，有许多重复性任务，如文件移动和内容转换。
   - 最初尝试使用Shell脚本，但随着特殊情况增多，脚本变得复杂且难以维护。
   - 转向Java，利用其静态类型和优秀的开发环境。

3. **现代Java的改进**：
   - 现代Java和工具不再需要传统的`POM`文件和`src/main/java`目录结构。
   - 通过[JEP 330](https://openjdk.org/jeps/330)和[JEP 458](https://openjdk.org/jeps/458)，可以直接运行`.java`文件，无需预编译。

4. **实例主方法和隐式类**：
   - [JEP 477](https://openjdk.org/jeps/477)简化了小型Java程序的编写，减少了冗余代码。
   - 隐式类允许在文件顶层定义变量和方法，无需显式定义类。
   - `java.base`模块自动导入，简化了代码。

5. **记录和枚举**：
   - Java中的记录（records）和枚举（enums）使代码更易读，适合处理相关信息。
   - 记录可以包含方法，枚举比Python的枚举更简洁。

6. **其他语言特性**：
   - 在脚本中广泛使用`var`和静态导入，简化代码。
   - 文本块（text blocks）类似于脚本中的“here documents”，便于在代码中嵌入数据。

7. **API特性**：
   - Java的字符串、正则表达式、集合和日期/时间库非常优秀，文档详尽。
   - 例如，读取文件内容到字符串只需一行代码。

8. **缺少的功能**：
   - 标准库中缺少JSON和命令行处理功能，但可以通过简单的库解决。

9. **受检异常**：
   - 在脚本中，受检异常可能显得繁琐，可以通过`throws Exception`简化处理。
   - 在lambda表达式中处理受检异常时，可以使用“sneaky throw”库。

10. **IDE和文件组织**：
    - 使用Java编写脚本时，建议使用支持Java的IDE或编辑器，如Visual Studio Code或Emacs。
    - 可以通过IDE的设置将项目基础目录作为源目录，避免繁琐的项目结构。

11. **JBang工具**：
    - JBang解决了Java脚本中使用第三方库的痛点，允许在源文件中直接添加Maven依赖。
    - 支持将Java文件转换为可执行脚本，并提供多种功能，如启动JShell和IDE。

12. **笔记本（Notebooks）**：
    - 笔记本适合探索性编程，支持代码和文本单元格，便于实验和结果展示。
    - Java的笔记本工具尚不成熟，但有多个项目正在开发中，如JTaccuino和Kotlin Notebook。

13. **结论**：
    - 通过合适的工具，Java在小型程序中表现出色，尤其适合需要编译时类型检查和工具支持的场景。
    - Java也逐渐成为探索性编程的潜在选择，尽管相关工具仍在发展中。
