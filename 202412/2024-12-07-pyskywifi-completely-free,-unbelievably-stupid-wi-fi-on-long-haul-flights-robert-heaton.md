# PySkyWiFi: completely free, unbelievably stupid wi-fi on long-haul flights | Robert Heaton
- URL: https://robertheaton.com/pyskywifi/
- Added At: 2024-12-07 07:55:38

## TL;DR
作者在飞机上通过飞行里程账户发现了一个Wi-Fi登录页面的漏洞，进而开发了PySkyWiFi，利用该账户实现互联网访问。通过编写命令行工具和简化版的TCP/IP协议，作者在飞行中实现了即时消息传递、实时新闻获取等功能，并计划未来通过HTTP `CONNECT`请求进一步优化。

## Summary
1. **背景**：
   - 作者在飞机上连接到机上Wi-Fi，发现登录页面要求输入信用卡信息。
   - 作者注意到登录页面鼓励免费登录飞行里程账户，认为这是一个防火墙漏洞。

2. **发现漏洞**：
   - 作者登录飞行里程账户，发现可以通过编辑个人资料页面的名称字段来访问整个互联网。
   - 作者意识到可以通过飞行里程账户进行慢速但可行的互联网访问。

3. **原型开发**：
   - **原型1：即时消息**：
     - 通过更新飞行里程账户的名称字段，实现简单的即时消息传递。
     - 作者编写了一个命令行工具来自动化这一过程，通过轮询名称字段来接收消息。
   - **原型2：实时新闻、股票价格和足球比分**：
     - 编写一个程序，在地面计算机上运行，通过飞行里程账户向飞机上的作者发送实时信息。
     - 作者可以在飞行中接收最新的股票价格或足球比分。

4. **PySkyWiFi开发**：
   - **PySkyWiFi简介**：
     - PySkyWiFi是一个简化版的TCP/IP协议，通过飞行里程账户实现HTTP请求和响应的传输。
     - 作者在飞行中编写了PySkyWiFi，使其在下次飞行中可以通过飞行里程账户访问互联网。
   - **工作原理**：
     - PySkyWiFi包含两个组件：天空代理（在飞机上运行）和地面守护进程（在地面计算机上运行）。
     - 用户通过`curl`命令向天空代理发送HTTP请求，请求通过飞行里程账户传输到地面守护进程，再由地面守护进程发送给目标网站，并将响应传回给用户。

5. **技术细节**：
   - **传输层和网络层**：
     - 传输层负责决定客户端之间应发送的数据，类似于TCP协议。
     - 网络层负责实际发送数据，类似于IP协议。
   - **消息传输机制**：
     - 发送者将长消息分割成小块，通过`DATA`段发送，接收者通过`ACK`段确认接收。
     - 发送者发送`END`段以告知接收者消息结束。
   - **网络层实现**：
     - 网络层包含`send`和`recv`操作，用于读写数据。
     - 网络层还定义了`sleep_for`和`segment_data_size`属性，用于控制轮询间隔和段大小。

6. **优化和增强**：
   - **消息编码**：
     - 使用base26编码确保飞行里程账户接受消息。
   - **增加带宽**：
     - 通过使用更多账户字段或增加段大小来提高带宽。
   - **未来改进**：
     - 使用HTTP `CONNECT`请求来设置隧道，使PySkyWiFi能够作为系统级代理处理浏览器请求。

7. **总结**：
   - 作者通过PySkyWiFi成功加载了自己的博客首页，认为这是他最有效率也是最无效率的一次飞行。
