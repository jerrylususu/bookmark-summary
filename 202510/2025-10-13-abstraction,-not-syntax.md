# Abstraction, not syntax
- URL: https://ruudvanasseldonk.com/2025/abstraction-not-syntax
- Added At: 2025-10-13 14:02:24
- [Link To Text](2025-10-13-abstraction,-not-syntax_raw.md)

## TL;DR
配置格式的核心不是句法之争，而在于通过编程抽象（如循环、公式）消除重复，提升维护性。支持抽象的语言虽可能增加复杂性，但在复杂场景中优势显著。

## Summary
这篇文章的核心观点是：在配置格式的讨论中，句法（如缩进风格或逗号）是次要问题，真正的关键在于抽象能力，即如何通过编程结构（如循环和公式）消除重复配置，提升可维护性。

作者指出，YAML的替代格式（如TOML、JSON变体）虽在句法上更简洁，但本质上仍基于相似的数据模型（对象/数组或节点/属性），无法解决重复配置导致的错误。通过一个云存储桶配置示例，文章展示了传统配置格式容易出现的bug（如区域不一致、数值错误），并强调单纯改变句法无法避免这些问题。

解决方案是使用支持抽象能力的配置语言（如RCL、Cue、Dhall），通过循环、变量和计算表达式动态生成配置。这样做的好处包括：
- 减少重复代码，防止复制粘贴错误。
- 使用公式代替魔术数字，提升可读性和准确性。
- 简化维护，如添加新配置只需修改少数代码。

然而，抽象也带来权衡：
- 需引入构建步骤生成最终配置文件。
- 降低可搜索性（如配置项名称不再直接可见）。
- 可能过度复杂化，需谨慎平衡抽象与简洁度。

文章建议，对于复杂配置，应优先考虑抽象能力而非句法优化，并可通过版本控制生成文件来缓解可搜索性问题。最终，作者呼吁在配置管理中更注重数据结构层面的抽象，而非停留在句法争论上。
