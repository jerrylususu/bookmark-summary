# How to Fix Any Bug — overreacted
- URL: https://overreacted.io/how-to-fix-any-bug/
- Added At: 2025-10-21 13:55:37
- [Link To Text](2025-10-21-how-to-fix-any-bug-—-overreacted_raw.md)

## TL;DR
文章通过修复网页滚动Bug的案例，总结了系统性方法：先建立可客观验证的可复现案例，再逐步简化代码定位问题根源，避免盲目猜测。核心原则是简化优于理论测试，确保每一步都验证Bug存在，适用于复杂项目调试。最终通过修正React Router依赖解决问题。

## Summary
作者在开发一个包含步进式卡片的网页应用时，遇到一个滚动问题：点击卡片按钮触发服务器请求后，滚动功能出现抖动或失效。文章以这一真实案例为基础，总结出修复Bug的系统性方法。

### Bug修复的核心步骤
1. **步骤0：直接尝试修复（但常失败）**  
   - 例如，作者让Claude（AI助手）修复，但它未有效验证结果，导致多次错误“修复”。  
   - 关键教训：缺乏可复现案例（repro）的修复往往无效。

2. **步骤1：建立可复现案例（Repro）**  
   - Repro需明确步骤、预期行为和实际行为（如“点击按钮后应滚动，实际却抖动”）。  
   - 问题：AI或他人可能无法感知“抖动”等主观现象，需将Repro转化为可客观验证的形式（如测量滚动位置变化）。

3. **步骤2：简化并验证Repro**  
   - 将Repro简化为更直接的测试（如用代码检测滚动位置是否变化）。  
   - 风险：新Repro可能偏离原问题，必须验证其相关性（例如，确认已知的修复方法在新Repro中也有效）。  
   - 作者通过注释网络请求验证了新Repro的有效性。

4. **步骤3：逐步移除无关代码**  
   - 遵循“删除-测试-提交”循环：不断删除代码（如组件、样式），仅保留Bug仍存在的版本，直到无法再简化。  
   - 关键：避免过早测试理论，而应专注缩小Repro范围，确保每一步Bug仍存在。  
   - 作者指出Claude因过早测试理论而失败，类比了编程中的“良基递归”概念——必须确保每步都向目标前进。

5. **步骤4：定位根本原因**  
   - 通过简化代码，作者发现Bug与React Router的`ScrollRestoration`组件相关：旧版本会在每次路由验证时触发滚动恢复，与`scrollIntoView`冲突，导致抖动。  
   - 更新依赖后问题解决。  
   - 强调：此方法能有效隔离问题，即使复杂项目也能缩小至最小复现案例。

### 核心原则
- **Repro是基础**：没有可靠Repro，修复易偏离方向。  
- **简化优于猜测**：优先通过删除代码缩小问题范围，而非盲目测试理论。  
- **验证每一步**：确保简化后的Repro仍反映原问题，避免误判。  
- **工具限制**：AI或协作时，需将主观问题转化为客观可测的指标。

最终，作者通过这一严谨流程成功解决Bug，并强调该方法在复杂项目中普遍适用。
