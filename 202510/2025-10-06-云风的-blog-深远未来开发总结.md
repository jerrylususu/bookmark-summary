# 云风的 BLOG: 深远未来开发总结
- URL: https://blog.codingnow.com/2025/10/deepfuture_dev.html
- Added At: 2025-10-06 05:54:57

## TL;DR
云风在7周内独立开发桌游《深远未来》，采用自研引擎，注重任务拆分与视觉反馈以维持热情，并通过开源协作加速开发。最终代码量约1.3万行，经验包括保持小规模开发、及早重构和利用社区贡献。

## Summary
本文是云风对游戏开发项目《深远未来》的开发历程总结，分为开发过程、关键挑战、外部协作、经验教训和统计数据几个方面。

### 开发过程
项目从2025年7月底启动，历时约7周（中断两周）。从零开始实现了一款基于桌游规则的数字化游戏，涉及多个开发阶段，包括引擎完善、界面设计、游戏逻辑编码、测试和优化。

1. **引擎与基础设施**：基于自研引擎soluna，扩展了图形渲染、输入处理和多平台支持功能。
2. **游戏功能实现**：
   - 首先完成静态界面和本地化模块，逐步实现游戏规则流程（如布局、开始、行动、结算等阶段）。
   - 行动阶段按规则拆分为8种类型，逐个实现，确保可交互性。
   - 开发中注重视觉反馈，通过逐步实现功能保持开发动力。
3. **测试与玩家反馈**：早期依赖人工测试和预演，后期通过玩家试玩（如IndiePlay评审）发现并修复问题，调整交互设计。
4. **收尾工作**：完成胜利结算、存档系统、文明卡与奇迹实现、界面优化和多语言支持等。

### 关键挑战与解决方案
1. **技术问题**：
   - 多线程死锁和alpha混合处理（预乘改为非预乘）耗费额外时间，通过调整工具链和工作流解决。
   - 状态管理使用Lua协outine实现轻量级状态机，分离游戏逻辑与渲染。
   - 复杂规则（如advancement effect）需严格抽象和多次重构，确保可复用性和准确性。
2. **设计决策**：
   - 优先保持桌游原规则，避免自动结算，以增强玩家参与感和规则学习。
   - 交互设计围绕卡片选择，减少菜单使用，突出游戏主题。
   - 测试效率通过脚本化setup提升，避免依赖存档或手动测试。
3. **开发体验**：
   - 注重保持开发热情，通过分拆任务和每日进展维持动力。
   - 视觉反馈和可玩版本发布（如Twitter分享）帮助缓解开发枯燥感。

### 外部协作与开源收益
1. **开源贡献**：项目开源后，社区参与者帮助实现了多平台支持（MacOS/Linux）、英文本地化和部分功能修复（如胜利判定）。
2. **协作优势**：拆分独立任务（如本地化、跨平台）有效加速开发，减少重复劳动。
3. **交流与改进**：公开代码促进了更清晰的bug讨论和设计思路梳理，同时利用GitHub免费特性。

### 经验总结与数据统计
1. **项目数据**：
   - 游戏代码：约13,000行（总变更17,240行），引擎soluna变更5,672行。
   - 美术与设计：耗时3-4天制作资源，2天学习排版（使用flexbox）。
   - Bug较少，归因于规则稳定和前期的充分试玩。
2. **开发经验**：
   - 保持热情是关键，任务拆解和视觉反馈有助于维持效率。
   - 代码量控制（20,000行内）适合独立项目周期，避免热情消耗。
   - 重构宜早不宜迟，独立开发允许频繁调整而无协作压力。
   - 数据分离和引擎集成帮助控制代码规模，避免膨胀。
   - 优化可延期记录，优先保证进度，代码质量通过迭代提升。
3. **开源价值**：尽管业务代码开源经济收益有限，但获得了社区支持、bug反馈和思维梳理收益， outweigh "面子"顾虑。

整体上，项目强调独立开发中情绪管理、渐进实现和社区协作的重要性，同时通过具体数据验证了开发效率和方法有效性。
