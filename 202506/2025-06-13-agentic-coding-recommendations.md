# Agentic Coding Recommendations
- URL: https://lucumr.pocoo.org/2025/6/12/agentic-coding/
- Added At: 2025-06-13 14:07:14

## TL;DR


本文总结了代理式编码实践经验，推荐Claude Code的Sonnet模型优化工具使用，优先选择Go语言因其显式Context和简洁性，避免Python复杂特性；强调工具需快速、容错并可观测，采用Tailwind/React前端工具链但注意TanStack路由问题；主张代码简单设计、及时重构，提升效率与稳定性，未来需持续关注简洁性、并行化等核心原则。

## Summary


本文总结了作者在代理式编码（Agentic Coding）中的实践经验及建议，涵盖工具选择、编程语言偏好、效率优化及工作流程优化等核心要点：

### **工具与工作流程**
1. **Claude Code使用**  
   - 主要用Claude Code的Sonnet模型（性价比优于Opus），优化工具以减少token消耗，避免截图和浏览器交互。  
   - 工作流：赋予代理全权控制任务，极少中途干预，IDE角色缩小，甚至重拾Vim进行最终编辑。  

2. **MCP协议应用**  
   - 少用MCP（Minimum_capability_protocol），仅在代理难以直接调用工具时使用（如浏览器自动化需Playwright-MCP）。  
   - 自定义工具为普通脚本直接运行，避免复杂配置以提升稳定性。

### **语言与框架选择**
1. **Go语言优势**  
   - **推荐Go**：适合后端开发，因具备：  
     * 显式的Context系统，便于代理传递数据；  
     * 测试增量执行高效（对比Rust的cargo test语法问题）；  
     * 语言简洁且生态系统强调向下兼容，减少错误代码生成。  
   - **Python问题**：代理易因异步事件循环或pytest fixtures等复杂特性出错，启动慢导致代理循环效率低。

2. **前端工具链**  
   - 采用Tailwind、React搭配TanStack Router/Query及Vite，但TanStack路由文件名含美元符易导致代理混淆（如无法正确编辑$param.tsx）。

### **工具优化原则**
- **工具设计四准则**：  
  1. 快速响应，避免卡顿；  
  2. 用户友好，清晰反馈错误；  
  3. 容错设计（抵御代理的非常规操作）；  
  4. 提供可观测性与调试能力。  
- **实践案例**：  
  - 通过Makefile管理服务进程，用进程管理器的pidfile避免重复启动；  
  - 日志实时输出并保存文件，代理可直接读取日志（如调试邮件发送流程）。

### **效率与稳定性**
1. **速度优先**  
   - 工具执行速度直接影响代理效率，慢工具需优化或改用守护进程（如Python模块热加载方案）。  
2. **稳定性管理**  
   - 谨慎升级依赖库，避免代理因环境变化生成过时代码；  
   - 优先自行编写简单代码，减少依赖第三方包。

### **代码设计原则**
- **简单代码**：  
  - 避免复杂架构（如继承、ORM过度使用）；  
  - 明确权限检查位置，避免分散配置；  
  - 直接使用SQL而非ORM，便于代理与日志匹配。  
- **并行化**：  
  - 通过Docker或工具（如container-use）隔离环境，提升多代理并发能力。  

### **重构与维护**
- 达到代码复杂度阈值时必须重构（如组件库提取），避免代理因代码碎片化引入回归问题。

### **未来展望**
- 代理开发工具快速发展，核心原则（简洁性、稳定性、可观测性及并行化）将持续重要，需灵活适应技术迭代。  

注：文中提及工具如OpenCode、Goose、Cursor背景代理等均为替代方案，但Claude Code为当前首选。
