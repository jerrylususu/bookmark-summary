# Every service should have a killswitch
- URL: https://www.seangoedecke.com/killswitches/
- Added At: 2025-06-19 14:52:31

## TL;DR


文章强调系统设计中必须配置killswitch（紧急关闭开关），通过功能标记等机制快速暂停失控服务，用于修复系统性错误、阻断高风险服务（如LLM）或降低系统负载。作者建议定期测试确保有效性，并平衡其实用性与系统复杂度，认为这是提升系统抗风险能力的高性价比防御策略。

## Summary


本文强调在系统设计中为每个服务配置killswitch（紧急关闭开关）的必要性，认为这是经验丰富工程师的必备实践。killswitch可通过功能标记（feature flag）快速禁用失控服务，例如在自动化任务代码中添加`return if feature_enabled?(killswitch)`，紧急时仅需数分钟启用标记即可阻断故障。作者引用Google某次服务事故报告，指出其killswitch失效加剧问题，事故中工程师通过紧急部署修复版开关解决危机。

killswitch的实现形式不限于功能标记，还可通过删除特定安全文件或强制依赖外部API调用等机制实现，但SaaS领域多采用简洁的功能标记。使用场景包括：①修复系统性错误（如删除用户数据或生成垃圾内容）；②应对LLM类服务被绕过后的风险（如生成有害信息）；③系统崩溃时快速关闭非核心功能以降低负载。例如数据库过载时，大量重试请求可能加重压力，此时通过killswitch关闭次要功能可帮助核心服务恢复。

作者建议结合指数退避和抖动等策略减少故障时的雪崩效应，但强调killswitch在极端情况中的不可替代性。其核心价值在于简单直接，只需关闭系统而无需复杂修复。需注意killswitch本身可能因未定期测试而失效，因此需确保其可验证性。作者主张对非必要且高频触发的服务添加killswitch，而非每个代码路径，以平衡实用性和系统复杂度。

最终观点认为，合理配置killswitch是系统设计中成本效益比极高的防御性策略，能够显著提升系统抗风险能力，建议开发者将其作为自动化服务的标准构建模块。
