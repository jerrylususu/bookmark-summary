# Cognition | Don’t Build Multi-Agents
- URL: https://cognition.ai/blog/dont-build-multi-agents#applying-the-principles
- Added At: 2025-06-19 14:58:43
- [Link To Text](2025-06-19-cognition-don’t-build-multi-agents_raw.md)

## TL;DR


本文提出构建AI代理应优先采用单线程架构或上下文压缩技术，以避免多代理系统的信息割裂与错误累积。核心原则包括共享完整上下文和协调隐含决策，实例验证表明单代理及压缩技术可提升系统可靠性，当前建议优先单线程方案并关注技术演进。

## Summary


本文提出了构建AI代理的核心原则，强调避免多代理架构以减少错误累积，主张采用单线程代理或上下文压缩技术。核心观点如下：

### 核心原则
1. **共享完整上下文**：代理需共享任务分解、子任务结果及完整执行历史，而非仅片段信息。子代理需包含主任务全上下文，避免信息缺失导致决策偏差。
2. **行动包含隐含决策**：各代理的行动可能隐含关键决策，若决策冲突（如子代理对任务理解不一致），会导致最终结果不一致。需确保子任务间决策协调。

### 问题分析
- **多代理架构的脆弱性**：以"开发Flappy Bird克隆"为例，多代理可能因信息隔离导致子任务结果（如背景与角色设计风格冲突），主代理难以整合错误结果。
- **上下文溢出风险**：单线程代理虽能保证上下文连续，但过长的任务可能超出模型记忆容量。

### 解决方案
1. **单线程线性代理**：所有子任务在单代理内顺序执行，确保上下文连续性；适用于多数场景，但存在上下文长度限制。
2. **上下文压缩技术**：引入专用语言模型压缩历史对话与行动记录，提取关键信息（如决策、结论），平衡上下文完整性和容量限制。此方法需针对领域调整模型（如微调小型模型）。

### 实例验证
- **Claude Code代理**：通过子代理仅回答特定问题，避免并行任务冲突；子代理工作不进入主上下文，延长任务历史长度。
- **编辑应用模型**：早期多模型协作（大模型生成指令，小模型执行编辑）因指令模糊易出错，现改用单模型完成决策与执行，提升可靠性。

### 现状与展望
- **多代理协作的局限性**：当前技术下，代理间有效沟通与一致性协商仍不成熟，决策分散易引发错误。短期依赖单代理方案，未来需解决跨代理上下文传递难题。
- **技术发展方向**：强化单线程代理的沟通能力（如上下文压缩）或随模型智能提升自然支持多代理协作，可能成为长期解决方案。

文章建议开发者优先遵循核心原则，通过单代理架构或优化技术提升系统可靠性，同时保持对技术演进的开放态度。
