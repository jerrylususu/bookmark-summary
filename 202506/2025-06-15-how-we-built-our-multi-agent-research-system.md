# How we built our multi-agent research system
- URL: https://www.anthropic.com/engineering/built-multi-agent-research-system
- Added At: 2025-06-15 10:49:24
- [Link To Text](2025-06-15-how-we-built-our-multi-agent-research-system_raw.md)

## TL;DR


Anthropic开发的多智能体系统通过主-子代理架构协同工作，以动态策略和并行搜索提升复杂任务解决能力。核心优势包括动态适应性、并行信息压缩及性能扩展性（较单代理提升90.2%），通过分工协调、工具调用优化及自检机制实现。虽面临代币消耗成本问题，但已在技术、商业和学术领域显著缩短深度问题解决时间，验证多智能体系统在动态决策场景的潜力。

## Summary


Anthropic团队构建的多智能体研究系统通过分解复杂任务并协调多个代理（LLMs）协同工作，显著提升了开放性问题的解决能力。该系统以“主代理-子代理”架构为核心，主代理制定研究策略并调度多个子代理并行执行信息搜索，最终整合结果生成答案。与传统静态检索方法不同，其动态多步骤搜索可根据新发现灵活调整策略，尤其在需要并行探索多路径的信息密集型任务中表现突出。

核心优势包括：
1. **动态适应性**：代理可自主调整策略，适应用户问题的复杂性和不确定性。
2. **并行压缩能力**：子代理通过独立上下文窗口并行探索，压缩海量信息并提炼关键内容，解决单代理上下文限制。
3. **性能扩展性**：实验显示，使用Claude Opus 4主代理+Claude Sonnet 4子代理的多代理系统比单代理性能提升90.2%，证明其在信息检索任务中的规模化优势。

关键架构与工程实践：
- **协调模式**：主代理负责任务分解与调度，子代理执行具体工具调用（如网络搜索、文档分析）。
- **流程控制**：用户查询经主代理分析后创建子代理并行执行，结果经合成后通过引注代理关联信息源，确保引用准确性。
- **高效并行**：主代理并行启动多子代理，子代理也并行调用3+工具，使复杂查询处理速度提升90%。

提示工程与评估方法：
- **策略设计**：通过提示词工程指导代理行为，包括任务边界定义、工具选择规则（如优先专业工具）、动态调整搜索广度等，避免资源过度消耗或分配不足。
- **自我优化机制**：利用Claude 4的自我改进能力诊断缺陷，工具测试代理能自动生成改进后的工具描述，将任务完成时间缩短40%。
- **评估创新**：结合小样本快速测试、LLM评分（评估事实准确性、完整性、工具效率等维度）和人工审核，应对多代理行为的不可预测性。

系统挑战与解决方案：
- **状态管理**：通过持久化执行、错误恢复机制和检查点保留，确保长期运行的代理不受中断影响。
- **调试复杂性**：全链路生产追踪系统捕捉代理决策路径，分析工具使用、查询质量等，而非依赖静态日志。
- **部署协调**：采用彩虹部署渐进替换旧版本，避免更新导致在途任务失败。
- **执行瓶颈**：虽同步执行简化协调，但未来转向异步模式以增加并行度。

应用场景显示，用户利用该系统显著缩短了技术问题解决时间，并在软件开发、商业策略优化、学术研究等领域创造价值。该架构的成功验证了多智能体系统在需要深度信息整合与动态决策场景中的必要性，但也强调需权衡高代币消耗带来的经济性限制。附录进一步补充了持久化状态评估、长会话上下文管理及子代理输出直存等优化策略，以增强系统实用性。
