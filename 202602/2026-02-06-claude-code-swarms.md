# Claude Code Swarms
- URL: https://addyosmani.com/blog/claude-code-agent-teams/
- Added At: 2026-02-06 13:22:19
- Tags: #read #agent #deepdive

## TL;DR
文章介绍Claude Code的代理团队功能，允许多个AI代理并行协作，提升复杂任务效率，但成本较高且为实验性功能，需明确任务分解并适合调试、审查等场景。

## Summary
### 引言
文章介绍了Claude Code新支持的代理团队（swarms）功能，该功能允许多个AI代理并行协作，代替传统的单代理顺序工作模式，旨在提高复杂任务的效率和协作能力。

### 什么是代理团队
代理团队是一种多代理协作架构，由一个团队领导代理创建和管理多个队友代理，每个代理拥有独立的上下文窗口，并行处理任务。核心概念包括：
- **团队领导**：负责创建团队、协调工作。
- **队友代理**：独立实例，专注于特定角色。
- **任务列表**：共享任务队列，支持依赖跟踪。
- **邮箱系统**：代理间直接通信机制。

### 优势
多代理协调的优势在于解决单代理模型的局限性：
- **上下文聚焦**：LLMs在上下文扩大时性能下降，多代理通过专业化任务避免信息过载。
- **并行效率**：代理可同时工作，缩短任务完成时间，尤其在调试、审查等场景。
- **容错性**：单个代理失败不影响整体，任务可重新分配。

### 架构和组件
代理团队的关键组件及其角色：
- **团队领导**：协调者，不参与具体工作。
- **队友代理**：执行者，可自我分配任务。
- **与子代理对比**：子代理是单代理的扩展，报告结果给主代理；代理团队支持代理间协作，但成本更高。

### 使用方法
启用和使用代理团队的步骤：
- **启用功能**：在settings.json中添加实验标志 `CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS: "1"`。
- **创建团队**：通过自然语言指令指定团队结构，如分配不同角色的队友。
- **控制方式**：支持显示模式（in-process或split panes）、计划批准、委托模式（限制领导只协调）等。

### 适用场景
代理团队适合以下任务类型：
- **并行调试**：多个代理同时测试不同假设，快速定位问题。
- **代码审查**：代理分别检查安全性、性能等，提高覆盖率。
- **跨层开发**：前端、后端、测试由不同代理并行处理。
- **研究探索**：多代理调查不同方案，共享结果。

### 注意事项
使用代理团队时需注意：
- **实验性功能**：存在不稳定问题，如领导代理可能越权工作、任务状态延迟等。
- **成本问题**：每个代理是独立实例，令牌成本较高，不适合简单任务。
- **技术限制**：不支持嵌套团队、会话恢复有限、拆分窗格需特定终端。
- **管理建议**：任务需明确划分，避免文件冲突；确保问题适合并行处理。

### 最佳实践
- **从小任务开始**：先尝试研究或审查任务，再扩展到复杂开发。
- **明确任务分解**：将问题结构化，使代理能独立执行。
- **使用工具辅助**：如Compound Engineering插件，可增强规划和管理。
- **以问题为导向**：根据任务需求选择工具，避免过度配置。

### 总结
代理团队是AI代理协作的重要进展，通过并行化和专业化提升复杂任务的效率，但需谨慎使用以平衡成本与收益。核心技能在于问题分解和规范制定，而非单纯代码生成。
