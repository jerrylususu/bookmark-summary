# That boolean should probably be something else | nicole@web
- URL: https://ntietz.com/blog/that-boolean-should-probably-be-something-else/
- Added At: 2025-07-01 13:41:39
- [Link To Text](2025-07-01-that-boolean-should-probably-be-something-else-nicole@web_raw.md)

## TL;DR


文章指出，避免过度使用布尔值以优化设计。建议用日期时间替代需记录具体时刻的布尔字段（如验证时间戳），用枚举类型代替涉及状态或角色的布尔（如任务状态、用户角色），以增强扩展性与可维护性。布尔仅适用于临时存储计算结果，长期需优先存储原始数据。此举可减少维护成本，清晰表达业务需求。

## Summary


布尔值虽基础但常被过度使用，多数情况应改用其他类型以提升设计。关键替代方案如下：

**1. 日期时间**  
- 布尔值常表征时间事件（如用户是否验证邮箱），但会丢失具体时间。  
- 用可空时间戳字段替代，既可判断事件是否发生，又能获取发生时刻，便于后续分析（如排查特定时间窗口的问题）。  
- 当需记录单次状态变化事件时，优先存储时间戳而非布尔值。

**2. 枚举类型**  
- 多数布尔逻辑涉及类型或状态（如用户角色、任务状态）。  
- **角色示例**：将`is_admin`布尔改为`UserRole`枚举（用户、管理员、访客、超级管理员），扩展更灵活，工具可强制覆盖所有情况。  
- **状态示例**：任务状态用枚举（排队、运行中、失败等）替代多个布尔字段，支持状态机设计，代码更简洁且便于分析状态转移。  
- **权限检查**：返回枚举而非布尔，携带拒绝原因等信息（如`PermissionCheck`枚举含`Denied("权限不足")`等），增强可调试性。  
- 若多个布尔字段相互排斥或频繁共变，暗示需枚举替代。

**3. 布尔适用场景**  
- 临时存储条件表达式结果以优化可读性或减少重复计算。  
- 例如将复杂逻辑保存为`can_do_this: bool`变量，但需注意后续可能仍需改用枚举提升结构。

**总结原则**  
布尔值易导致数据与逻辑紧耦合，设计时需深挖其底层含义：若依赖时间或枚举状态，则优先存储原始数据而非布尔。提前设计可减少长期维护成本，关键是以数据类型清晰表征业务需求。
