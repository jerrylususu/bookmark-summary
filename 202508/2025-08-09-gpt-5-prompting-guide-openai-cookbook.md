# GPT-5 prompting guide | OpenAI Cookbook
- URL: https://cookbook.openai.com/examples/gpt-5/gpt-5_prompting_guide
- Added At: 2025-08-09 07:24:06
- [Link To Text](2025-08-09-gpt-5-prompting-guide-openai-cookbook_raw.md)

## TL;DR


GPT-5通过精细参数调校（如推理努力分级、工具前缀设计）和API优化（响应API提升效率），在代理任务、编码能力及可控性上显著提升。需明确任务边界、采用结构化工具流程，并结合生产环境调优（如Cursor案例），同时避免矛盾指令并强化伦理安全，最终依赖精准提示工程实现高效可控的人工智能应用。

## Summary


GPT-5是OpenAI推出的旗舰模型，显著提升了代理任务处理、编码能力、原始智能和可控性。以下为使用指南核心要点：

---

### **代理任务调校**
- **控制主动性**：  
  - **减少主动性**：调整`reasoning_effort`为低或中档，定义清晰的探索边界（如限制工具调用次数），使用提示示例如`Early stop criteria`避免冗长推理。极端场景可设固定工具预算（如最多2次调用）。  
  - **增加主动性**：提升`reasoning_effort`，使用提示如`保持任务完成直至解决`，禁止因不确定性终止任务，自主推断合理假设继续执行。

- **工具前缀（Tool Preambles）**：  
  - 设计清晰的工具调用前缀，例如：  
    - 重述用户目标 → 制定结构化计划 → 逐步执行并更新进度 → 总结成果。  
  - 通过API参数控制前缀详细程度，提升用户对代理任务的理解与互动体验。

---

### **推理与API优化**
- **推理努力（Reasoning Effort）分级**：  
  - `minimal`：低延迟，适合简单任务；需清晰提示规划步骤，防止任务中途终止。  
  - `medium/high`：复杂任务推荐，确保多步骤推理连贯性。

- **响应API（Responses API）**：  
  - 核心优势：保留历史推理上下文，减少重复计划构建，降低成本和延迟。  
  - 实际效果：零售基准测试中性能提升超4%（Tau-Bench评分从73.9%至78.2%）。

---

### **编码与前端开发**
- **前端开发建议**：  
  - **技术栈**：推荐Next.js（TypeScript）、Tailwind CSS、Shadcn/ui组件、Lucide图标等。  
  - **代码规范**：通过提示明确设计原则（模块化、一致性、简洁性），并指定目录结构与代码风格（如变量名避免单字母）。  
  - **零代码生成应用**：使用自我反思机制，要求模型先定义评分标准（如5-7个维度），再生成优化方案。

- **代码库兼容性**：  
  - 提示需包含现有代码库的设计规则（工程原则、目录结构、最佳实践），确保新代码风格与项目统一。

---

### **生产级案例：Cursor的提示调优**
- **系统提示优化**：  
  - 将全局冗长度设为低，但要求代码部分`保持高冗长度以增强可读性`。  
  - 修正矛盾提示（如原指令要求紧急情况不询问用户但又需确认权限），改为明确流程（紧急情况直接指导拨打911）。  
  - 通过结构化指令（如`<context_understanding>`段）平衡上下文深度与工具调用效率。

- **动态规则配置**：  
  - 允许用户自定义规则（如Cursor的[自定义规则系统]），提升模型适配性与用户体验。

---

### **指令与伦理控制**
- **避免矛盾指令**：  
  - 模糊或矛盾指令会导致模型过度消耗推理资源试图解决，例如：  
    - 原始医疗调度提示矛盾（要求先查患者资料但又允许紧急情况跳过），修正后明确“紧急情况直接指导就医无需查资料”。

- **伦理与安全性**：  
  - 对高风险工具（如文件删除）设置严格用户确认阈值，低风险工具（如搜索）放宽限制。

---

### **输出与维护**
- **Markdown格式**：  
  - 默认不启用，需通过明确提示激活（如“使用Markdown标注代码块和列表”），长对话需每3-5轮追加格式指令。

- **元提示（Meta-prompting）**：  
  - 利用GPT-5自优化提示，示例指令：  
    ```  
    找出原提示中的不足，并提出最小化修改建议以优化目标行为。  
    ``` 

---

### **总结**
GPT-5的卓越性能依赖于**精准的提示工程**与**API特性利用**。关键成功要素包括：清晰的任务边界定义、动态调整推理努力级别、规范工具调用流程、结合生产环境调优（如Cursor案例），以及持续检查提示一致性。
