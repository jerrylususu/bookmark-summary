# Storing times for human events
- URL: https://simonwillison.net/2024/Nov/27/storing-times-for-human-events/
- Added At: 2024-11-28 13:31:23
- [Link To Text](2024-11-28-storing-times-for-human-events_raw.md)

## TL;DR
文章讨论了在事件网站中存储事件时间的复杂性，强调了用户错误和国际时区变化带来的挑战。作者建议记录用户的原始意图和事件地点，同时计算并存储UTC时间，以避免时区问题和用户错误。

## Summary
1. **问题背景**：
   - 作者在过去的项目中处理过各种事件网站，发现存储事件时间的最佳方式是一个看似简单但实际上非常困难的问题。
   - 本文是作者在lobste.rs上发表的评论的扩展版本，该评论在Twitter上引起了广泛关注。

2. **问题描述**：
   - 事件发生在特定日期和时间，准确的时间信息非常重要，错误的通知可能导致参与者错过事件。
   - 事件网站最糟糕的错误之一是导致人们按错误时间到达事件地点。

3. **常见“最佳实践”**：
   - 数据库工程师通常建议将所有日期和时间存储在UTC中，以避免夏令时和时区问题。
   - PostgreSQL用户可能建议使用`TIMESTAMP WITH TIME ZONE`，但这实际上只存储UTC时间，不存储时区信息。

4. **潜在问题**：
   - **用户错误**：用户可能在创建事件时选择了错误的时区或地点，导致时间显示错误。
   - **国际时区问题**：某些地区可能会在事件创建和实际发生之间更改时区规则，导致存储的UTC时间与实际时间不符。

5. **用户错误**：
   - 最常见的问题是用户在创建事件时选择了错误的时区或地点。
   - 用户可能不理解或不关心时区，导致选择错误的时区。
   - 如果用户后来更改了事件地点，但没有更新时间，数据库中的时间将不正确。

6. **国际时区问题**：
   - 某些国家可能会在短时间内更改夏令时规则，导致软件开发者面临混乱。
   - 例如，某些国家可能会在同一时间有多个时区活动，具体取决于不同的机构。

7. **作者建议**：
   - 最重要的是记录用户的原始意图，即用户指定的事件时间。
   - 同时，尽可能准确地记录事件发生的地点和时区。
   - 通过地点可以推断出时区，但需注意边缘情况，如地点正好位于两个时区的分界线上。
   - 计算并存储事件的UTC时间，用于排序、显示和其他用途，但在用户编辑事件时显示原始时间。

8. **时区UI问题**：
   - 作者提到，现代互联网上的时区UI通常设计不佳，例如Google Calendar的时区选择界面缺乏搜索功能，难以找到特定的时区。
