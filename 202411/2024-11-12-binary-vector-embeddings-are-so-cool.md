# Binary vector embeddings are so cool
- URL: https://emschwartz.me/binary-vector-embeddings-are-so-cool/
- Added At: 2024-11-12 14:01:24

## TL;DR
二进制向量嵌入通过量化技术实现了32倍压缩和25倍检索速度提升，同时保持95%以上检索准确率。该技术类似于JPEG压缩，能在大幅减小尺寸的同时保持高信息保留率，适用于个性化内容流等应用。

## Summary
1. **概述**：
   - 二进制向量嵌入在保持95%以上检索准确率的同时，实现了32倍的压缩和约25倍的检索速度提升。

2. **嵌入简介**：
   - 嵌入将任意文本转换为一系列数字，代表内容的含义。
   - 嵌入向量的维度范围从512到8192或更多，每个权重通常表示为32位浮点数。
   - 嵌入用于表示输入文本，并可通过余弦相似度查找相似内容。

3. **二进制量化**：
   - 将32位浮点权重转换为单个比特，大于0映射为1，否则为0。
   - 使用汉明距离（计算不同比特数）搜索相似内容。
   - 二进制量化能保留大量信息，如MixedBread的`mxbai-embed-large-v1`模型在3.125%的嵌入大小下保留96.45%的性能。

4. **其他模型表现**：
   - `all-MiniLM-L6-v2`保留93.79%性能
   - `nomic-embed-text-v1.5`保留87.7%
   - `cohere-embed-english-v3.0`保留94.6%

5. **JPEG压缩类比**：
   - Alex Kesling指出，这种技术类似于JPEG压缩，能在大幅减小尺寸的同时保持图像质量。

6. **Matryoshka嵌入对比**：
   - Matryoshka嵌入通过将重要信息置于向量前端，支持切片并保留较高性能。
   - OpenAI的`text-embedding-3-large`模型在减少维度时性能略有下降，如1024维保留99%，256维保留96%。

7. **MixedBread模型维度截断**：
   - 维度减少到50%或25%以下时，性能显著下降。
   - 相比之下，二进制量化能在仅3%原始大小下保持高准确性。

8. **二进制量化与Matryoshka结合**：
   - MixedBread结合两种技术，进一步压缩向量并量化权重。
   - 例如，512维向量在1.56%原始大小下保留90.76%性能。

9. **二进制嵌入的优势**：
   - 存储成本显著降低，计算距离更快，汉明距离计算仅需几个CPU周期。
   - 二进制量化向量检索速度提升15x-45x，平均25x。

10. **应用实例**：
    - 作者使用MixedBread模型构建个性化内容流，通过二进制量化解决了向量相似性查找速度问题。

11. **结论**：
    - 二进制量化向量嵌入在大幅压缩和加速检索的同时，保持了高准确性，令人印象深刻。
