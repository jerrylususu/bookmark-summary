# Building Multi-Agent Systems (Part 2)
- URL: https://blog.sshh.io/p/building-multi-agent-systems-part
- Added At: 2025-11-02 11:29:15

## TL;DR
自多智能体系统系列首篇发布以来，基于LLM的智能体架构在工具调用能力和长时间运行方面显著进步，其核心思想——任务分解和协作——已成为标准，但架构设计变得更加灵活。重点从复杂流程设计转向提供上下文和目标的“上下文工程”，使智能体更加自主。同时，新挑战出现在系统控制、安全性和长时间任务的用户体验上。

## Summary
本文是《构建多智能体系统》系列的第二部分，回顾和总结了自第一部分发布6个月以来的发展变化。核心观点是，构建多智能体系统的核心理念（即将复杂问题分解为协作的子智能体）已成为标准方法，但具体实现方式正在快速演变。

以下是关键总结：

### 保持一致的趋势
- **基于LLM的工具使用智能体**：仍然以大型语言模型（LLM）为基础，通过工具调用（如生成文本调用外部函数）实现功能。
- **多智能体系统管理复杂性**：通过引入精心设计的子智能体模块化系统，应对复杂任务。
- **工具设计面向智能体**：工具应围绕LLM的局限性设计，优先考虑直观性和简化，而非简单映射API。
- **计算机使用仍不成熟**：任务自动化智能体（如模拟人类点击、打字）仍不可靠或受限，例如仅能在特定浏览器中操作。

### 新的变化
- **推理模型与工具使用能力提升**：OpenAI、Anthropic等提供的模型在工具调用、自我调试、环境探索等方面显著改进，能更好地处理工具失败和调整计划。
- **智能体运行时间延长**：多智能体架构、更好的推理能力和更长的有效上下文窗口，使智能体无需人工干预即可运行更长时间，支持更大规模的任务。
- **智能提升减少基于架构的编排**：随着模型变得更智能，重心从设计精细的工作流程转向提供目标和上下文（即“上下文工程”），信任智能体自主寻找最优解。例如，Anthropic的Slack机器人案例显示，智能体可忽略固定指令，通过工具（如GitHub搜索）自主解决问题。

### 更新的多智能体架构
1. **主导-专家架构（Lead-Specialist）**：主导智能体规划任务，委托专家智能体处理特定子问题。适用于模块化复杂任务（如旅行助手中的航班、酒店专家）。失败风险在于专家间存在未处理的依赖关系。
2. **主控-克隆架构（Master-Clone）**：主控智能体克隆自身处理子任务，所有克隆共享相似上下文和工具。适用于多步骤任务，减少运行时复杂性。失败风险在于上下文过多导致成本高昂或遗漏。
3. **脚本架构（Scripting）**：智能体通过编写代码（如Python脚本）直接操作数据或API，适合传统工具效率低下的场景（如数据分析）。失败风险源于沙盒环境管理复杂或任务不适用于脚本。

### 已回答问题（来自第一部分）
- **成本**：设计良好的系统虽昂贵，但能解决更广问题，使高价订阅合理化。
- **工具与框架**：自定义框架或使用CrewAI、LangGraph等可行；趋势是依赖模型智能进行编排，自定义基础循环可能足够。
- **团队构建**：多智能体架构支持工程师并行工作，但提示更新等任务可通过AI助手（如Claude）自动化。

### 新思考的问题
- **控制权与安全**：智能体可能忽略指令以实现更高目标，引发对重要决策中安全、隐私的担忧（如“回形针最大化”风险）。
- **长时间任务的UI/UX**：聊天界面不适于长时间任务，需探索如何提供 observable 体验（如运行数小时的任务）。

总体趋势显示，智能体系统正从指令驱动转向目标驱动，模型智能的提升减少了人工编排的必要性，但带来了控制权和用户体验的新挑战。
