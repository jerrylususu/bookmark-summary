# Understanding Spec-Driven-Development: Kiro, spec-kit, and Tessl
- URL: https://martinfowler.com/articles/exploring-gen-ai/sdd-3-tools.html
- Added At: 2025-11-11 13:27:39
- Tags: #read #llm

## TL;DR
规范驱动开发（SDD）提倡先写规范再生成代码。目前工具有Kiro、spec-kit和Tessl，但多数仅实现“规范优先”层次。现有SDD面临工作流程僵化、文件冗长、AI不确定性明显等问题，实际应用中易导致审查负担重和过度工程。预期未来工具需更灵活迭代并优化规范管理。

## Summary
本文探讨了规范驱动开发（SDD）这一新兴AI编程概念，分析了三种SDD工具（Kiro、spec-kit和Tessl）的实现方式和实际应用挑战。

### SDD定义与层次
- **SDD核心**：在编写代码前先撰写规范（“文档优先”），规范作为人和AI的共同事实来源。定义尚不统一，常被类比为产品需求文档。
- **三个层次**：
  - **规范优先（Spec-first）**：先写详细规范，再用于AI辅助开发。
  - **规范锚定（Spec-anchored）**：任务完成后保留规范，用于后续功能演进和维护。
  - **规范即源码（Spec-as-source）**：规范成为主要文件，人类只编辑规范，不直接修改代码。
- 大多数SDD工具仅实现“规范优先”，而“规范锚定”和“规范即源码”仍处于探索阶段。

### 规范与上下文文件
- **规范**：用自然语言编写的结构化、行为导向的文档，描述软件功能，指导AI编码代理。通常针对特定任务。
- **内存库（Memory Bank）**：项目级上下文文件（如架构文档、产品描述），跨所有AI会话共享，与规范分离。

### 工具分析
1. **Kiro**：
   - 最轻量级，专注于“规范优先”。
   - 工作流：需求（用户故事格式）→ 设计（架构图等）→ 任务（带UI的任务列表）。
   - 内存库称为“steering”，包含product.md、tech.md等文件。
   - 缺点：对小问题（如修复bug）过于繁琐，工作流缺乏灵活性。

2. **Spec-kit**：
   - GitHub推出的CLI工具，高度可定制。
   - 工作流：宪法（内存库）→ 规范 → 计划 → 任务（循环迭代）。
   - 使用检查清单跟踪进度，但生成大量Markdown文件，审查负担重。
   - 尽管声称支持“规范锚定”，但实际更接近“规范优先”，规范仅用于变更请求周期。

3. **Tessl Framework**：
   - 唯一明确追求“规范锚定”和“规范即源码”的工具（目前为私有测试版）。
   - 规范与代码文件一对一映射，代码标记为“自动生成，禁止编辑”。
   - 通过标签（如`@generate`）控制代码生成，但存在LLM非确定性问题，需迭代优化规范以提高可重复性。

### 挑战与观察
- **适用性问题**：现有工具工作流僵化，难以适应不同规模的问题（如小修复vs.大型功能），常导致过度工程。
- **审查负担**：工具生成大量冗长的Markdown文件，审查体验差，不如直接审查代码高效。
- **控制幻觉**：尽管有详细规范，AI代理仍可能忽略指令或过度遵循，凸显迭代开发的重要性。
- **规范分离难题**：功能规范与技术实现的界限模糊，实践中难以清晰界定。
- **目标用户不明确**：工具假设开发者能完成产品级分析，但大型功能需专业需求分析，适用场景存疑。
- **历史教训**：SDD与模型驱动开发（MDD）类似，后者因抽象层级尴尬和 overhead 高而失败。LLM虽减轻了生成代码的负担，但引入了非确定性，可能结合MDD的僵化与LLM的不稳定性缺点。

### 结论
- **规范优先原则有价值**：在AI辅助编程中，预先制定规范能提升效率，但SDD定义仍模糊，易与“详细提示”混淆。
- **工具实用性存疑**：现有工具可能过度复杂化工作流，加剧审查压力和AI幻觉，需警惕“越改越糟”的风险。
- **未来方向**：有效的SDD工具需支持灵活、迭代的工作流，优化规范审查体验，并从历史尝试（如MDD）中吸取教训。
